<div class="container-fluid">
    <div class="page-header">
      <div class="row  mt-3">
        <div class="col-md-7">
          <span class="backnavIcon" [routerLink]="['/homepage']">
            <i class="fa fa-angle-left" aria-hidden="true"></i>
          </span>
          <h4 class="text-orange">Ammend Mandate</h4>
        </div>
        <div class="col-md-5 text-right small align-self-end createIcons">
          <div class="row">
            <div class="col-5">
              <!-- <mat-form-field>
                                <input matInput placeholder="Product" type="text" name="Product"  />
                              </mat-form-field> -->
  
              <!-- *ngIf="isValid;else other_content" -->
              <!-- <mat-form-field>
  
                <mat-select placeholder="Product" id="productlist" [(ngModel)]="productType"  (change)="onKeyForProduct($event)" >
                  <mat-option *ngFor="let type of productDetails?.data" [value]="type.productName">
                    {{ type.productName }}
                  </mat-option>
                </mat-select>
              </mat-form-field> -->
  
  
            </div>
            <div class="col-3 ml-auto">
              <i class="fa fa-floppy-o" aria-hidden="true"></i>
              <i class="fa fa-print"></i>
              <i class="fa fa-times"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  
  
  
    <div class="createMandateSec">
      <form [formGroup]="amendForm">
        <div class="row">
          <div class="col-7 pr-0">
            <mat-card class="bg-grey">
              <div class="imageBlock" [hidden]="ImageUrl">
                <div class="row text-center">
                  <div class="col-12">
                    <div class="image-upload">
                      <label for="file-input" id="mndUpload">
                        <img src="assets/images/upload.png" id="mndUploadImg" class="img-responsive" width="70">
                      </label>
                      <input id="file-input" type="file" (change)="onFileSelected($event)" formControlName="uploadedImage" />
                    </div>
  
                    <h5 class="mt-2">Upload Mandate</h5>
                    <p>Maximum File size 1mb</p>
                  </div>
                </div>
                <hr>
                <div class="row">
                  <div class="col-12 text-center">
                    <h4>Only JPG and JPEG is allowed with size of max 100kb and max resolution of 300 DPI</h4>
                  </div>
                </div>
              </div>
              <div class="icon-bar">
                <a href="#" class="facebook">
                  <i class="fa fa-plus" aria-hidden="true"></i>
                </a>
                <a href="#" class="twitter">
                  <i class="fa fa-search-plus"></i>
                </a>
                <a href="#" class="google">
                  <i class="fa fa-arrows-alt" aria-hidden="true"></i>
                </a>
                <a href="#" class="linkedin">
                  <i class="fa fa-crop"></i>
                </a>
                <i class="fas fa-redo"></i>
                <a href="#" class="youtube">
                  <i class="fa fa-minus"></i>
                </a>
              </div>
              <div class="scrollbarHeight">
                  <label for="file-input" id="mndUpload">
                      <img [src]="ImageUrl" id="image" class="img-fluid">
                  </label>
                <input [hidden]="ImageUrl" id="file-input" type="file" (change)="onFileSelected($event)" formControlName="uploadedImage" />
              </div>
            </mat-card>
            <div class="row">
              <div class="col-12">
                <div class="image-upload pl-3">
                  <label for="file-input">
                    <div class="thumbnailImg"></div>
                    <p>+ Attachment</p>
                  </label>
                  <input id="file-input" type="file" />
                </div>
              </div>
            </div>
          </div>
          <div class="col-5 pl-0">
            <mat-card class="formBlock">
              <div>
  
                <div class="row">
                  <div class="col-6">
                    <mat-form-field>
                      <input matInput placeholder="UMRN" id="umrn" formControlName="umrn" value="{{mandateToAmend?.umrn}}" readonly>
                    </mat-form-field>
                    <mat-form-field>
                      <input matInput placeholder="Sponsoring Bank Code" value="{{mandateToAmend?.sponsorBankCode}}" 
                      formControlName="sponsorBankCode"
                         [value]="amendForm.sponsorBankCode" readonly>
                    </mat-form-field>
                    <mat-error *ngFor="let validation of account_validation_messages.sponsorBankCode">
                      <mat-error class="error-message" *ngIf="amendForm.get('sponsorBankCode').hasError(validation.type)">{{validation.message}}
                      </mat-error>
                  </mat-error>

  
                    <mat-form-field>
                      <input matInput placeholder="Bank Account Number" value="{{mandateToAmend?.payerAccNum}}" formControlName="payerAccNum"
                        id="payerAccNo" required>
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.payerAccNum">
                        <mat-error id="errpayerAccNo" class="error-message" *ngIf="amendForm.get('payerAccNum').hasError(validation.type) && (amendForm.get('payerAccNum').dirty || amendForm.get('payerAccNum').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>
                   
                  </div>
  
                  <div class="col-6">
  
                    <mat-form-field>
                      <input matInput [matDatepicker]="picker" placeholder="Date" id="createdDate" [min]="minDate" formControlName="createdDate" readonly>
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
  
                    <mat-form-field>
                      <input matInput placeholder="Utility Code" value="{{mandateToAmend?.utilityCode}}" id="utilityCode" formControlName="utilityCode"
                        [value]="amendForm.utilityCode"  readonly>
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.utilityCode">
                      <mat-error class="error-message" *ngIf="amendForm.get('utilityCode').hasError(validation.type)">{{validation.message}}
                      </mat-error>
                  </mat-error>

                    <mat-form-field>
                      <mat-select placeholder="Account Type" id="accType" value="{{mandateToAmend?.payerAccType}}" formControlName="payerAccType" required>
                        <mat-option *ngFor="let type of accountType" [value]="type.value">
                          {{ type.viewValue }}
                        </mat-option>
                      </mat-select>
                      <mat-error *ngFor="let validation of account_validation_messages.payerAccType">
                        <mat-error class="error-message" *ngIf="amendForm.get('payerAccType').hasError(validation.type)">{{validation.message}}
                        </mat-error>
                    </mat-error>
                    </mat-form-field>
                  </div>
                </div>
  
                <div class="row">
                  <div class="col-6">
                    <mat-form-field>
                      <input matInput placeholder="Destination bank code(IFSC/MICR)" value="{{mandateToAmend?.payerBankCode}}" 
                        id="payeeBankCode" formControlName="payerBankCode" (keyup)="onKeyForDestBank($event)" readonly>
                    </mat-form-field>

                   

  
                  </div>
                  <div class="col-3">
                    <mat-form-field>
                      <input matInput placeholder="Amount" formControlName="amt" value="{{mandateToAmend?.maxAmount}}" id="amt"  required>
  
                    </mat-form-field>
                    <mat-error *ngFor="let validation of account_validation_messages.amt" id="erramt">
                        <mat-error class="error-message" *ngIf="amendForm.get('amt').hasError(validation.type) && (amendForm.get('amt').dirty || amendForm.get('amt').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>

                    <!-- <input matInput placeholder="Amount" formControlName="amt" > -->
  
                    <!-- <span>{{amtErr}}</span> -->
                  </div>
                  <div class="col-3">
                    <mat-form-field>
                      <mat-select placeholder="Debit Type" id="amountType" value="{{mandateToAmend?.amountType}}" formControlName="amountType" mat-option>
                        <mat-option *ngFor="let type of amountTypes" [value]="type.value">
                          {{ type.viewValue }}
                        </mat-option>
                      </mat-select>
  
                    </mat-form-field>
                  </div>
                </div>
  
                <div class="row">
                  <div class="col-3">
                    <mat-form-field>
                      <mat-select placeholder="Frequency" id="frequency" value="{{mandateToAmend?.mandateFrequency}}" formControlName="mandateFrequency" required >
                        <mat-option *ngFor="let frq of frequencies" [value]="frq.value" >
                          {{ frq.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-3">
                    <mat-form-field>
                      <input matInput [matDatepicker]="picker1" placeholder="Starting from" 
                      value="{{mandateToAmend?.startDate}}" id="startingFrom" (ngModelChange)="startDateChanged($event)"
                        [min]="minDate" [max]="startingDate" formControlName="startDate" required >
                      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                      <mat-datepicker id="startDate" #picker1></mat-datepicker>
                    </mat-form-field>
  
                  </div>
                  <div class="col-3">
                    <mat-form-field>
                      <input matInput [matDatepicker]="picker2" placeholder="Upto" id="upto" (ngModelChange)="endDateChanged($event)" [min]="endingDate"
                        formControlName="endDate" >
                      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                      <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
  
                  </div>
                  <div class="col-3">
                    <mat-checkbox  (change)="untillCancelClicked($event)" id="untilCancel" [checked]="checkBoxValue">Until Cancel</mat-checkbox>
                  </div>
                </div>
  
                <div class="row">
                  <div class="col-6">
                    <mat-form-field>
                      <input matInput placeholder="Consumer reference number 1" id="consumerRefNo" formControlName="consumerRefNo" value="{{mandateToAmend?.consumerRefNo}}">
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.consumerRefNo" >
                        <mat-error id="errconsumerRefNo" class="error-message" *ngIf="amendForm.get('consumerRefNo').hasError(validation.type) && (amendForm.get('consumerRefNo').dirty || amendForm.get('consumerRefNo').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>
  
                    <mat-form-field>
                      <input matInput placeholder="Scheme plan reference number" id="schemeReference" formControlName="schemeRefNo" value="{{mandateToAmend?.schemeRefNo}}">
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.schemeRefNo">
                        <mat-error id="errschemeReference" class="error-message" *ngIf="amendForm.get('schemeRefNo').hasError(validation.type) && (amendForm.get('schemeRefNo').dirty || amendForm.get('schemeRefNo').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>
  
                  </div>
                  <div class="col-6">
                    <mat-form-field>
                      <input matInput placeholder="Mobile Number" formControlName="payerMobileNo" id="mobileNumber" value="{{mandateToAmend?.payerMobileNo}}" required>
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.payerMobileNo">
                        <mat-error id="errmobileNumber" class="error-message" *ngIf="amendForm.get('payerMobileNo').hasError(validation.type) && (amendForm.get('payerMobileNo').dirty || amendForm.get('payerMobileNo').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>

  
  
                    <mat-form-field>
                      <input matInput placeholder="Mail Id" formControlName="payerEmail" id="emailAddress" value="{{mandateToAmend?.payerEmail}}">
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.payerEmail">
                        <mat-error id="erremailAddress" class="error-message" *ngIf="amendForm.get('payerEmail').hasError(validation.type) && (amendForm.get('payerEmail').dirty || amendForm.get('payerEmail').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>
  
                  </div>
                </div>
  
                <div class="row">
                  <div class="col-12">
                    <mat-form-field>
                      <input matInput placeholder="Name of Account Holder" id="payerName" formControlName="payerName" value="{{mandateToAmend?.payerName}}" readonly>
                    </mat-form-field>

                    <mat-error *ngFor="let validation of account_validation_messages.payerName">
                        <mat-error id="payerName" class="error-message" *ngIf="amendForm.get('payerName').hasError(validation.type) && (amendForm.get('payerName').dirty || amendForm.get('payerName').touched)">{{validation.message}}
                        </mat-error>
                    </mat-error>
  
                  </div>
                </div>
  
                <div class="row">
                  <div class="col-6">
                    <mat-form-field>
                      <input matInput placeholder="Customer Additional Identifiaction" id="customerAdditionalIdentification" formControlName="custAddId" value="{{mandateToAmend?.custAddId}}">
                    </mat-form-field>

                    <mat-form-field>
                      <mat-select placeholder="Amendment Reason" id="Reason"  formControlName="reason" required>
                        <mat-option *ngFor="let frq of Reason" [value]="frq.value" >
                          {{ frq.viewValue }}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>

                  </div>
                </div>
  
  
  
                <div class="row text-center">
                  <div class="col-12">
                    <span class="error_msg" id="errcustomerAdditionalIdentification">{{errorMsg}}</span>
                  </div>
                </div>
  
                <div class="row text-center">
                  <div class="col-12">
                    <span class="error_msg" id="imageErrMsg">{{errorMsg}}</span>
                  </div>
                </div>
  
                <div class="row text-center">
                  <div class="col-12">
                    <span id="errorSubmitPopup" matTooltip="{{amendForm.invalid ? 'Please fill all mandatory fields' : ''}}">
                      <button type="submit" value="submit" id="submit" 
                      [disabled]="amendForm.invalid"  
                      (click)="ngSubmit(amendForm.value)"
                        class="btn btn-default btn-common">Ammend Mandate</button>
                    </span>
                    <button class="btn btn-default clearBtn ml-2" id="clear" (click)="clear(amendForm.value)">Close</button>
                  </div>
                </div>
              </div>
            </mat-card>
          </div>
        </div>
      </form>
  
    </div>
  
  
  </div>
  

  